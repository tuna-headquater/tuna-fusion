# Generated by Fabric8 CRDGenerator, manual edits might get overwritten!
apiVersion: "apiextensions.k8s.io/v1"
kind: "CustomResourceDefinition"
metadata:
  name: "podfunctions.fusion.tuna.ai"
spec:
  group: "fusion.tuna.ai"
  names:
    kind: "PodFunction"
    plural: "podfunctions"
    shortNames:
    - "pf"
    singular: "podfunction"
  scope: "Namespaced"
  versions:
  - additionalPrinterColumns:
    - jsonPath: ".status.currentBuild.name"
      name: "CurrentBuild"
      priority: 0
      type: "string"
    - jsonPath: ".status.effectiveBuild.name"
      name: "EffectiveBuild"
      priority: 0
      type: "string"
    name: "v1"
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              appType:
                enum:
                - "AgentApp"
                - "WebApp"
                type: "string"
              configmaps:
                items:
                  properties:
                    name:
                      type: "string"
                    namespace:
                      type: "string"
                  type: "object"
                type: "array"
              entrypoint:
                type: "string"
              fileAssets:
                items:
                  properties:
                    content:
                      type: "string"
                    envName:
                      type: "string"
                    executable:
                      type: "boolean"
                    fileName:
                      type: "string"
                    targetDirectory:
                      enum:
                      - "DEPLOY_ARCHIVE"
                      - "WORKSPACE"
                      type: "string"
                  required:
                  - "content"
                  - "executable"
                  - "fileName"
                  - "targetDirectory"
                  type: "object"
                type: "array"
              podPoolName:
                type: "string"
              secrets:
                items:
                  properties:
                    name:
                      type: "string"
                    namespace:
                      type: "string"
                  type: "object"
                type: "array"
            required:
            - "appType"
            - "entrypoint"
            - "podPoolName"
            type: "object"
            x-kubernetes-validations:
            - message: "PodFunctionSpec.podPoolName cannot be changed"
              rule: "oldSelf.podPoolName==self.podPoolName"
          status:
            properties:
              currentBuild:
                properties:
                  name:
                    type: "string"
                  phase:
                    enum:
                    - "Failed"
                    - "Pending"
                    - "Running"
                    - "Scheduled"
                    - "Succeeded"
                    type: "string"
                  startTimestamp:
                    type: "integer"
                  uid:
                    type: "string"
                type: "object"
              effectiveBuild:
                properties:
                  name:
                    type: "string"
                  phase:
                    enum:
                    - "Failed"
                    - "Pending"
                    - "Running"
                    - "Scheduled"
                    - "Succeeded"
                    type: "string"
                  startTimestamp:
                    type: "integer"
                  uid:
                    type: "string"
                type: "object"
            type: "object"
        type: "object"
    served: true
    storage: true
    subresources:
      status: {}
